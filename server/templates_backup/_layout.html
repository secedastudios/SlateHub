<!doctype html>
<html lang="en" data-theme="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="color-scheme" content="light dark" />
        <meta
            name="description"
            content="{% block description %}SlateHub - A collaborative hub for the TV, film, and content industries{% endblock %}"
        />
        <title>{% block title %}{{ app_name }}{% endblock %}</title>

        <!-- Pico CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
        />

        <!-- SlateHub Custom Overrides -->
        <link rel="stylesheet" href="/static/css/slatehub-pico.css" />
        <link rel="stylesheet" href="/static/css/layout.css" />
        <link rel="stylesheet" href="/static/css/forms.css" />
        <link rel="stylesheet" href="/static/css/profile.css" />

        <!-- Theme Initialization Script -->
        <script>
            // Check for saved theme preference or default to dark
            const savedTheme = localStorage.getItem("theme") || "dark";
            document.documentElement.setAttribute("data-theme", savedTheme);
        </script>

        {% block head %}{% endblock %}
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li>
                        <a href="/">
                            <strong>{{ app_name }}</strong>
                        </a>
                    </li>
                </ul>
                <ul>
                    <li>
                        <a
                            href="/"
                            {%
                            if
                            active_page=""
                            ="home"
                            %}aria-current="page"
                            {%
                            endif
                            %}
                            >Home</a
                        >
                    </li>
                    <li>
                        <a
                            href="/projects"
                            {%
                            if
                            active_page=""
                            ="projects"
                            %}aria-current="page"
                            {%
                            endif
                            %}
                            >Projects</a
                        >
                    </li>
                    <li>
                        <a
                            href="/people"
                            {%
                            if
                            active_page=""
                            ="people"
                            %}aria-current="page"
                            {%
                            endif
                            %}
                            >People</a
                        >
                    </li>
                    <li>
                        <a
                            href="/about"
                            {%
                            if
                            active_page=""
                            ="about"
                            %}aria-current="page"
                            {%
                            endif
                            %}
                            >About</a
                        >
                    </li>
                </ul>
                <ul>
                    <li>
                        <!-- Theme Toggle -->
                        <button
                            id="theme-toggle"
                            type="button"
                            aria-label="Toggle theme"
                            data-tooltip="Toggle theme"
                            data-placement="bottom"
                        >
                            <span data-theme-icon="light" aria-hidden="true"
                                >‚òÄÔ∏è</span
                            >
                            <span data-theme-icon="dark" aria-hidden="true"
                                >üåô</span
                            >
                        </button>
                    </li>
                    <li>
                        <!-- User Menu -->
                        {% if let Some(ref user) = user %}
                        <details>
                            <summary role="button">
                                <img
                                    src="{{ user.avatar }}"
                                    alt="{{ user.name }}"
                                />
                            </summary>
                            <ul dir="rtl">
                                <li><a href="/profile">Profile</a></li>
                                <li><a href="/settings">Settings</a></li>
                                <li><hr /></li>
                                <li>
                                    <form action="/logout" method="post">
                                        <button type="submit">Logout</button>
                                    </form>
                                </li>
                            </ul>
                        </details>
                        {% else %}
                        <a href="/login" role="button">Login</a>
                    </li>
                    <li>
                        <a href="/signup" role="button">Sign Up</a>
                        {% endif %}
                    </li>
                </ul>
            </nav>
        </header>

        <main>{% block content %}{% endblock %}</main>

        <footer>
            <section>
                <article>
                    <hgroup>
                        <h3>{{ app_name }}</h3>
                        <p>
                            A free, open-source SaaS platform for the TV, film,
                            and content industries.
                        </p>
                    </hgroup>
                </article>

                <article>
                    <h4>Quick Links</h4>
                    <nav>
                        <ul>
                            <li><a href="/docs">Documentation</a></li>
                            <li><a href="/api">API</a></li>
                            <li><a href="/privacy">Privacy Policy</a></li>
                            <li><a href="/terms">Terms of Service</a></li>
                        </ul>
                    </nav>
                </article>

                <article>
                    <h4>Connect</h4>
                    <nav>
                        <ul>
                            <li>
                                <a
                                    href="https://github.com/slatehub"
                                    rel="noopener noreferrer"
                                    target="_blank"
                                    >GitHub</a
                                >
                            </li>
                            <li><a href="/contact">Contact</a></li>
                            <li><a href="/blog">Blog</a></li>
                        </ul>
                    </nav>
                </article>
            </section>

            <hr />

            <section>
                <p>
                    <small
                        >¬© {{ year }} {{ app_name }}. All rights
                        reserved.</small
                    >
                </p>
                <p>
                    <small>v{{ version }}</small>
                </p>
            </section>
        </footer>

        <!-- Theme Toggle Logic -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const themeToggle = document.getElementById("theme-toggle");
                if (themeToggle) {
                    themeToggle.addEventListener("click", function () {
                        const currentTheme =
                            document.documentElement.getAttribute("data-theme");
                        const newTheme =
                            currentTheme === "light" ? "dark" : "light";
                        document.documentElement.setAttribute(
                            "data-theme",
                            newTheme,
                        );
                        localStorage.setItem("theme", newTheme);
                    });
                }
            });
        </script>

        {% block scripts %}{% endblock %}
    </body>
</html>
