{% extends "_layout.html" %} {% block title %}{{ profile.name }} - {{ app_name
}}{% endblock %} {% block page_name %}profile{% endblock %} {% block head %}
<link rel="stylesheet" href="/static/css/pages/profile.css" />
{% endblock %} {% block content %}
<section
    id="profile-main"
    data-component="profile"
    data-user-id="{{ profile.id }}"
    data-username="{{ profile.username }}"
    data-profile-type="{% if profile.is_own_profile %}own{% else %}public{% endif %}"
>
    <header id="profile-header" data-role="profile-header">
        <div id="profile-header-main" data-role="header-content">
            <div id="profile-avatar-container" data-role="avatar-container">
                {% if profile.avatar.is_some() %}
                <img
                    src="{{ profile.avatar.as_ref().unwrap() }}"
                    alt="{{ profile.name }}'s avatar"
                    id="profile-avatar"
                    data-role="avatar"
                />
                {% else %}
                <div id="profile-avatar-initials" data-role="avatar-initials">
                    {{ profile.initials }}
                </div>
                {% endif %}
            </div>

            <div id="profile-info" data-role="profile-info">
                <h1 id="heading-profile-name">{{ profile.name }}</h1>

                {% if profile.headline.is_some() %}
                <p id="profile-headline" data-role="headline">
                    {{ profile.headline.as_ref().unwrap() }}
                </p>
                {% endif %}
            </div>
        </div>

        {% if profile.is_own_profile %}
        <nav
            id="profile-actions"
            data-role="profile-actions"
            aria-label="Profile actions"
        >
            <a
                href="/profile/edit"
                id="link-edit-profile"
                role="button"
                data-type="primary"
            >
                Edit Profile
            </a>
        </nav>
        {% endif %}
    </header>

    <section
        id="section-about"
        data-section="about"
        aria-labelledby="heading-about"
    >
        <h2 id="heading-about">About</h2>

        {% if profile.bio.is_some() %}
        <p id="profile-bio" data-role="bio">
            {{ profile.bio.as_ref().unwrap() }}
        </p>
        {% endif %}

        <dl id="profile-details" data-role="details-list">
            {% if profile.location.is_some() %}
            <dt id="label-location">Location</dt>
            <dd id="detail-location" data-field="location">
                {{ profile.location.as_ref().unwrap() }}
            </dd>
            {% endif %} {% if profile.website.is_some() %}
            <dt id="label-website">Website</dt>
            <dd id="detail-website" data-field="website">
                <a
                    href="{{ profile.website.as_ref().unwrap() }}"
                    id="link-profile-website"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Visit {{ profile.name }}'s website"
                >
                    {{ profile.website.as_ref().unwrap() }}
                </a>
            </dd>
            {% endif %} {% if profile.is_own_profile %}
            <dt id="label-email">Email</dt>
            <dd id="detail-email" data-field="email" data-private="true">
                {{ profile.email }}
            </dd>
            {% endif %}
        </dl>
    </section>

    {% if !profile.skills.is_empty() || !profile.languages.is_empty() ||
    profile.availability.is_some() %}
    <section
        id="section-professional"
        data-section="professional"
        aria-labelledby="heading-professional"
    >
        <h2 id="heading-professional">Professional Details</h2>

        {% if !profile.skills.is_empty() %}
        <div
            id="subsection-skills"
            data-subsection="skills"
            aria-labelledby="heading-skills"
        >
            <h3 id="heading-skills">Skills</h3>
            <ul id="skills-list" data-role="skills-list" role="list">
                {% for skill in profile.skills %}
                <li
                    id="skill-{{ loop.index }}"
                    data-skill="{{ skill }}"
                    data-role="skill-tag"
                >
                    {{ skill }}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %} {% if !profile.languages.is_empty() %}
        <div
            id="subsection-languages"
            data-subsection="languages"
            aria-labelledby="heading-languages"
        >
            <h3 id="heading-languages">Languages</h3>
            <ul id="languages-list" data-role="languages-list" role="list">
                {% for language in profile.languages %}
                <li
                    id="language-{{ loop.index }}"
                    data-language="{{ language }}"
                    data-role="language-tag"
                >
                    {{ language }}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %} {% if profile.availability.is_some() %}
        <div
            id="subsection-availability"
            data-subsection="availability"
            aria-labelledby="heading-availability"
        >
            <h3 id="heading-availability">Availability</h3>
            <p id="profile-availability" data-role="availability-status">
                {{ profile.availability.as_ref().unwrap() }}
            </p>
        </div>
        {% endif %}
    </section>
    {% endif %} {% if !profile.experience.is_empty() %}
    <section
        id="section-experience"
        data-section="experience"
        aria-labelledby="heading-experience"
    >
        <h2 id="heading-experience">Experience</h2>
        <div id="experience-list" data-role="experience-list">
            {% for exp in profile.experience %}
            <article
                id="experience-{{ loop.index }}"
                data-component="experience-item"
                data-experience-id="{{ loop.index }}"
            >
                <header data-role="experience-header">
                    <h3 id="experience-title-{{ loop.index }}">
                        {{ exp.role }}
                    </h3>

                    {% if exp.production.is_some() %}
                    <p
                        id="experience-production-{{ loop.index }}"
                        data-role="production-name"
                    >
                        {{ exp.production.as_ref().unwrap() }}
                    </p>
                    {% endif %} {% if exp.dates.is_some() %} {% let dates =
                    exp.dates.as_ref().unwrap() %}
                    <div
                        id="experience-dates-{{ loop.index }}"
                        data-role="date-range"
                    >
                        {% if dates.start.is_some() %}
                        <time
                            datetime="{{ dates.start.as_ref().unwrap() }}"
                            data-role="start-date"
                        >
                            {{ dates.start.as_ref().unwrap() }}
                        </time>
                        {% endif %} {% if dates.start.is_some() &&
                        (dates.end.is_some() || !dates.end.is_some()) %}
                        <span aria-hidden="true" data-role="date-separator"
                            >–</span
                        >
                        {% endif %} {% if dates.end.is_some() %}
                        <time
                            datetime="{{ dates.end.as_ref().unwrap() }}"
                            data-role="end-date"
                        >
                            {{ dates.end.as_ref().unwrap() }}
                        </time>
                        {% else %} {% if dates.start.is_some() %}
                        <span data-role="current-position">Present</span>
                        {% endif %} {% endif %}
                    </div>
                    {% endif %}
                </header>

                {% if exp.description.is_some() %}
                <div
                    id="experience-description-{{ loop.index }}"
                    data-role="experience-description"
                >
                    <p>{{ exp.description.as_ref().unwrap() }}</p>
                </div>
                {% endif %}
            </article>
            {% endfor %}
        </div>
    </section>
    {% endif %} {% if !profile.education.is_empty() %}
    <section
        id="section-education"
        data-section="education"
        aria-labelledby="heading-education"
    >
        <h2 id="heading-education">Education</h2>
        <div id="education-list" data-role="education-list">
            {% for edu in profile.education %}
            <article
                id="education-{{ loop.index }}"
                data-component="education-item"
                data-education-id="{{ loop.index }}"
            >
                <header data-role="education-header">
                    <h3 id="education-institution-{{ loop.index }}">
                        {{ edu.institution }}
                    </h3>

                    {% if edu.degree.is_some() %}
                    <p
                        id="education-degree-{{ loop.index }}"
                        data-role="degree"
                    >
                        {{ edu.degree.as_ref().unwrap() }}
                    </p>
                    {% endif %} {% if edu.field.is_some() %}
                    <p
                        id="education-field-{{ loop.index }}"
                        data-role="field-of-study"
                    >
                        {{ edu.field.as_ref().unwrap() }}
                    </p>
                    {% endif %} {% if edu.dates.is_some() %} {% let dates =
                    edu.dates.as_ref().unwrap() %}
                    <div
                        id="education-dates-{{ loop.index }}"
                        data-role="date-range"
                    >
                        {% if dates.start.is_some() %}
                        <time
                            datetime="{{ dates.start.as_ref().unwrap() }}"
                            data-role="start-date"
                        >
                            {{ dates.start.as_ref().unwrap() }}
                        </time>
                        {% endif %} {% if dates.start.is_some() &&
                        dates.end.is_some() %}
                        <span aria-hidden="true" data-role="date-separator"
                            >–</span
                        >
                        {% endif %} {% if dates.end.is_some() %}
                        <time
                            datetime="{{ dates.end.as_ref().unwrap() }}"
                            data-role="end-date"
                        >
                            {{ dates.end.as_ref().unwrap() }}
                        </time>
                        {% endif %}
                    </div>
                    {% endif %}
                </header>
            </article>
            {% endfor %}
        </div>
    </section>
    {% endif %} {% if profile.bio.is_none() && profile.headline.is_none() &&
    profile.skills.is_empty() && profile.experience.is_empty() &&
    profile.education.is_empty() %}
    <section
        id="section-empty-state"
        data-role="empty-state"
        data-state="empty"
    >
        <h2 id="heading-empty-profile">Profile Not Set Up</h2>
        <p data-role="empty-message">
            {% if profile.is_own_profile %} Your profile hasn't been set up yet.
            Add some information about yourself to get started. {% else %} This
            user hasn't set up their profile yet. {% endif %}
        </p>

        {% if profile.is_own_profile %}
        <nav
            id="empty-state-actions"
            data-role="empty-state-actions"
            aria-label="Profile setup actions"
        >
            <a
                href="/profile/edit"
                id="link-setup-profile"
                role="button"
                data-type="primary"
            >
                Set Up Your Profile
            </a>
        </nav>
        {% endif %}
    </section>
    {% endif %} {% if !profile.is_own_profile && !profile.is_public %}
    <footer id="profile-footer" data-role="profile-footer">
        <p data-role="privacy-notice">
            <small id="privacy-text">
                This is a limited view of the profile. Some information may be
                hidden for privacy.
            </small>
        </p>
    </footer>
    {% endif %}
</section>
{% endblock %}
