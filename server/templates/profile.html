{% extends "_layout.html" %} {% block title %}{{ profile.name }} - {{ app_name
}}{% endblock %} {% block page_name %}profile{% endblock %} {% block head %}
<link rel="stylesheet" href="/static/css/pages/profile.css" />
{% endblock %} {% block content %}
<section
    id="profile-main"
    data-component="profile"
    data-user-id="{{ profile.id }}"
    data-username="{{ profile.username }}"
>
    <header id="profile-header" data-role="profile-header">
        <div data-component="profile-header-main">
            <div data-role="avatar-container">
                {% if profile.avatar.is_some() %}
                <img
                    src="{{ profile.avatar.as_ref().unwrap() }}"
                    alt="{{ profile.name }}'s avatar"
                    data-role="avatar"
                />
                {% else %}
                <div data-role="avatar-initials">{{ profile.initials }}</div>
                {% endif %}
            </div>
            <div data-role="profile-info">
                <h1 id="profile-name">{{ profile.name }}</h1>

                {% if profile.headline.is_some() %}
                <p id="profile-headline" data-role="headline">
                    {{ profile.headline.as_ref().unwrap() }}
                </p>
                {% endif %}
            </div>
        </div>
        {% if profile.is_own_profile %}
        <nav
            id="profile-actions"
            aria-label="Profile actions"
            data-role="profile-actions"
        >
            <a href="/profile/edit" role="button" data-type="primary"
                >Edit Profile</a
            >
        </nav>
        {% endif %}
    </header>

    <section
        id="section-about"
        aria-labelledby="heading-about"
        data-section="about"
    >
        <h2 id="heading-about">About</h2>

        {% if profile.bio.is_some() %}
        <p id="profile-bio" data-role="bio">
            {{ profile.bio.as_ref().unwrap() }}
        </p>
        {% endif %}

        <dl id="profile-details" data-role="details-list">
            {% if profile.location.is_some() %}
            <dt>Location</dt>
            <dd id="profile-location" data-field="location">
                {{ profile.location.as_ref().unwrap() }}
            </dd>
            {% endif %} {% if profile.website.is_some() %}
            <dt>Website</dt>
            <dd id="profile-website" data-field="website">
                <a
                    href="{{ profile.website.as_ref().unwrap() }}"
                    target="_blank"
                    rel="noopener"
                >
                    {{ profile.website.as_ref().unwrap() }}
                </a>
            </dd>
            {% endif %} {% if profile.is_own_profile %}
            <dt>Email</dt>
            <dd id="profile-email" data-field="email" data-private="true">
                {{ profile.email }}
            </dd>
            {% endif %}
        </dl>
    </section>

    {% if !profile.skills.is_empty() || !profile.languages.is_empty() %}
    <section
        id="section-professional"
        aria-labelledby="heading-professional"
        data-section="professional"
    >
        <h2 id="heading-professional">Professional Details</h2>

        {% if !profile.skills.is_empty() %}
        <section
            id="section-skills"
            aria-labelledby="heading-skills"
            data-subsection="skills"
        >
            <h3 id="heading-skills">Skills</h3>
            <ul id="profile-skills-list" data-role="skills-list">
                {% for skill in profile.skills %}
                <li data-skill="{{ skill }}">{{ skill }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %} {% if !profile.languages.is_empty() %}
        <section
            id="section-languages"
            aria-labelledby="heading-languages"
            data-subsection="languages"
        >
            <h3 id="heading-languages">Languages</h3>
            <ul id="profile-languages-list" data-role="languages-list">
                {% for language in profile.languages %}
                <li data-language="{{ language }}">{{ language }}</li>
                {% endfor %}
            </ul>
        </section>
        {% endif %} {% if profile.availability.is_some() %}
        <section
            id="section-availability"
            aria-labelledby="heading-availability"
            data-subsection="availability"
        >
            <h3 id="heading-availability">Availability</h3>
            <p id="profile-availability" data-role="availability-status">
                {{ profile.availability.as_ref().unwrap() }}
            </p>
        </section>
        {% endif %}
    </section>
    {% endif %} {% if !profile.experience.is_empty() %}
    <section
        id="section-experience"
        aria-labelledby="heading-experience"
        data-section="experience"
    >
        <h2 id="heading-experience">Experience</h2>
        <div data-role="experience-list">
            {% for exp in profile.experience %}
            <div
                data-component="experience-item"
                data-experience-id="{{ loop.index }}"
            >
                <header data-role="experience-header">
                    <h3 id="experience-role-{{ loop.index }}">
                        {{ exp.role }}
                    </h3>
                    {% if exp.production.is_some() %}
                    <p data-role="production-name">
                        {{ exp.production.as_ref().unwrap() }}
                    </p>
                    {% endif %} {% if exp.dates.is_some() %} {% let dates =
                    exp.dates.as_ref().unwrap() %}
                    <div data-role="date-range">
                        {% if dates.start.is_some() %}
                        <time
                            datetime="{{ dates.start.as_ref().unwrap() }}"
                            data-role="start-date"
                            >{{ dates.start.as_ref().unwrap() }}</time
                        >
                        {% endif %} {% if dates.end.is_some() %}
                        <span aria-hidden="true">-</span>
                        <time
                            datetime="{{ dates.end.as_ref().unwrap() }}"
                            data-role="end-date"
                            >{{ dates.end.as_ref().unwrap() }}</time
                        >
                        {% else %}
                        <span aria-hidden="true">-</span>
                        <span data-role="current-position">Present</span>
                        {% endif %}
                    </div>
                    {% endif %}
                </header>

                {% if exp.description.is_some() %}
                <div data-role="experience-description">
                    <p>{{ exp.description.as_ref().unwrap() }}</p>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %} {% if !profile.education.is_empty() %}
    <section
        id="section-education"
        aria-labelledby="heading-education"
        data-section="education"
    >
        <h2 id="heading-education">Education</h2>
        <div data-role="education-list">
            {% for edu in profile.education %}
            <div
                data-component="education-item"
                data-education-id="{{ loop.index }}"
            >
                <header data-role="education-header">
                    <h3 id="education-institution-{{ loop.index }}">
                        {{ edu.institution }}
                    </h3>
                    {% if edu.degree.is_some() %}
                    <p data-role="degree">{{ edu.degree.as_ref().unwrap() }}</p>
                    {% endif %} {% if edu.field.is_some() %}
                    <p data-role="field-of-study">
                        {{ edu.field.as_ref().unwrap() }}
                    </p>
                    {% endif %} {% if edu.dates.is_some() %} {% let dates =
                    edu.dates.as_ref().unwrap() %}
                    <div data-role="date-range">
                        {% if dates.start.is_some() %}
                        <time
                            datetime="{{ dates.start.as_ref().unwrap() }}"
                            data-role="start-date"
                            >{{ dates.start.as_ref().unwrap() }}</time
                        >
                        {% endif %} {% if dates.end.is_some() %}
                        <span aria-hidden="true">-</span>
                        <time
                            datetime="{{ dates.end.as_ref().unwrap() }}"
                            data-role="end-date"
                            >{{ dates.end.as_ref().unwrap() }}</time
                        >
                        {% endif %}
                    </div>
                    {% endif %}
                </header>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %} {% if profile.bio.is_none() && profile.headline.is_none() &&
    profile.skills.is_empty() %}
    <section
        id="section-empty-state"
        data-state="empty"
        data-role="empty-state"
    >
        <p>This user hasn't set up their profile yet.</p>
        {% if profile.is_own_profile %}
        <nav aria-label="Profile actions" data-role="empty-state-actions">
            <a href="/profile/edit" role="button" data-type="primary"
                >Create Your Profile</a
            >
        </nav>
        {% endif %}
    </section>
    {% endif %} {% if !profile.is_own_profile && !profile.is_public %}
    <footer id="profile-footer" data-role="profile-footer">
        <p data-role="privacy-notice">
            <small
                >This is a limited view of the profile. Some information may be
                hidden.</small
            >
        </p>
    </footer>
    {% endif %}
</section>
{% endblock %}
