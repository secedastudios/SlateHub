{% extends "_layout.html" %} {% block title %}Error {{ status_code }} - {{
app_name }}{% endblock %} {% block description %}An error occurred while
processing your request.{% endblock %} {% block page_name %}error-generic{%
endblock %} {% block content %}
<section
    data-component="error-page"
    data-type="generic"
    data-status="{{ status_code }}"
>
    <header data-role="error-header">
        <h1 id="heading-error-code">{{ status_code }}</h1>
        <h2 id="heading-error-message">
            {% if status_text %} {{ status_text }} {% elif status_code == 400 %}
            Bad Request {% elif status_code == 402 %} Payment Required {% elif
            status_code == 405 %} Method Not Allowed {% elif status_code == 408
            %} Request Timeout {% elif status_code == 409 %} Conflict {% elif
            status_code == 410 %} Gone {% elif status_code == 413 %} Payload Too
            Large {% elif status_code == 414 %} URI Too Long {% elif status_code
            == 415 %} Unsupported Media Type {% elif status_code == 422 %}
            Unprocessable Entity {% elif status_code == 429 %} Too Many Requests
            {% elif status_code == 502 %} Bad Gateway {% elif status_code == 503
            %} Service Unavailable {% elif status_code == 504 %} Gateway Timeout
            {% else %} An Error Occurred {% endif %}
        </h2>
    </header>

    <div data-role="error-body">
        <p id="error-description">
            {% if message %} {{ message }} {% elif status_code == 400 %} The
            request could not be understood or was missing required parameters.
            {% elif status_code == 402 %} This feature requires payment or an
            active subscription. {% elif status_code == 405 %} The requested
            method is not allowed for this resource. {% elif status_code == 408
            %} The request took too long to process. Please try again. {% elif
            status_code == 409 %} The request could not be completed due to a
            conflict with the current state of the resource. {% elif status_code
            == 410 %} The requested resource is no longer available and has been
            permanently removed. {% elif status_code == 413 %} The request is
            larger than the server is willing or able to process. {% elif
            status_code == 414 %} The requested URL is too long for the server
            to process. {% elif status_code == 415 %} The request entity has a
            media type which the server does not support. {% elif status_code ==
            422 %} The request was well-formed but contains validation errors.
            {% elif status_code == 429 %} You've made too many requests. Please
            wait before trying again. {% elif status_code == 502 %} The server
            received an invalid response from an upstream server. {% elif
            status_code == 503 %} The service is temporarily unavailable. Please
            try again later. {% elif status_code == 504 %} The server did not
            receive a timely response from an upstream server. {% else %} An
            unexpected error occurred while processing your request. {% endif %}
        </p>

        <div data-role="error-details">
            {% if request_path %}
            <p id="error-path">
                <strong>Requested path:</strong>
                <code>{{ request_path }}</code>
            </p>
            {% endif %} {% if request_id %}
            <p id="error-request-id">
                <strong>Request ID:</strong>
                <code>{{ request_id }}</code>
            </p>
            {% endif %} {% if timestamp %}
            <p id="error-timestamp">
                <strong>Timestamp:</strong>
                <time datetime="{{ timestamp }}">{{ timestamp }}</time>
            </p>
            {% endif %} {% if details %}
            <div data-role="additional-details">
                <details data-component="error-details">
                    <summary>Additional Details</summary>
                    <div data-role="details-content">
                        <pre><code>{{ details }}</code></pre>
                    </div>
                </details>
            </div>
            {% endif %}
        </div>

        <nav data-role="error-actions">
            {% if status_code == 429 %}
            <button
                onclick="setTimeout(() => window.location.reload(), 3000)"
                data-type="primary"
            >
                <span aria-hidden="true">‚è±Ô∏è</span> Retry in 3 seconds...
            </button>
            {% elif status_code >= 500 %}
            <button onclick="window.location.reload()" data-type="primary">
                <span aria-hidden="true">üîÑ</span> Try Again
            </button>
            {% else %}
            <button onclick="window.history.back()" data-type="primary">
                <span aria-hidden="true">‚¨ÖÔ∏è</span> Go Back
            </button>
            {% endif %}

            <a href="/" role="button" data-type="secondary">
                <span aria-hidden="true">üè†</span> Go to Homepage
            </a>

            {% if user.is_some() %}
            <a href="/projects" role="button" data-type="secondary">
                <span aria-hidden="true">üìÅ</span> View Your Projects
            </a>
            {% else %}
            <a href="/login" role="button" data-type="secondary">
                <span aria-hidden="true">üîë</span> Sign In
            </a>
            {% endif %}
        </nav>

        {% if status_code == 422 and validation_errors %}
        <div data-role="validation-errors">
            <h3 id="heading-validation-errors">Validation Errors:</h3>
            <ul data-role="error-list">
                {% for error in validation_errors %}
                <li
                    data-field="{% if error.field %}{{ error.field }}{% endif %}"
                >
                    {% if error.field %}
                    <strong>{{ error.field }}:</strong>
                    {% endif %} {{ error.message }}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %} {% if retry_after %}
        <div data-role="retry-info">
            <p id="retry-message">
                Please wait <strong>{{ retry_after }}</strong> seconds before
                retrying.
            </p>
        </div>
        {% endif %}
    </div>

    <footer data-role="error-footer">
        <div data-role="help-text">
            {% if status_code >= 500 %}
            <p>
                We apologize for the inconvenience. Our team has been notified
                and is working to resolve the issue.
            </p>
            {% endif %}
            <p>
                If you continue to experience problems, please contact support
                with the request ID above.
            </p>
        </div>
    </footer>
</section>
{% endblock %} {% block scripts %}
<script>
    // Auto-reload for rate limiting
    {% if status_code == 429 and retry_after %}
    setTimeout(() => {
        window.location.reload();
    }, {{ retry_after * 1000 }});
    {% endif %}
</script>
{% endblock %}
