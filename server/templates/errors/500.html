{% extends "_layout.html" %}

{% block title %}Internal Server Error - {{ app_name }}{% endblock %}
{% block description %}An unexpected error occurred while processing your request.{% endblock %}
{% block page_name %}error-500{% endblock %}

{% block content %}
<section data-component="error-page" data-type="500">
    <header data-role="error-header">
        <h1 id="heading-error-500">500</h1>
        <h2 id="heading-error-message">Internal Server Error</h2>
    </header>

    <div data-role="error-body">
        <p id="error-description">
            {% if message %}
                {{ message }}
            {% else %}
                Something went wrong on our end. We've been notified and are working to fix the issue.
            {% endif %}
        </p>

        <div data-role="error-details">
            {% if request_id %}
            <p id="error-request-id">
                <strong>Request ID:</strong>
                <code>{{ request_id }}</code>
            </p>
            {% endif %}

            {% if timestamp %}
            <p id="error-timestamp">
                <strong>Timestamp:</strong>
                <time datetime="{{ timestamp }}">{{ timestamp }}</time>
            </p>
            {% endif %}
        </div>

        <nav data-role="error-actions">
            <button onclick="window.location.reload()" data-type="primary">
                <span aria-hidden="true">🔄</span> Try Again
            </button>

            <a href="/" role="button" data-type="secondary">
                <span aria-hidden="true">🏠</span> Go to Homepage
            </a>

            {% if user.is_some() %}
                <a href="/projects" role="button" data-type="secondary">
                    <span aria-hidden="true">📁</span> View Your Projects
                </a>
            {% else %}
                <a href="/login" role="button" data-type="secondary">
                    <span aria-hidden="true">🔑</span> Sign In
                </a>
            {% endif %}
        </nav>
    </div>

    <footer data-role="error-footer">
        <div data-role="help-text">
            <p>If this problem persists, please contact our support team with the request ID above.</p>
            <p>We apologize for any inconvenience this may have caused.</p>
        </div>
    </footer>
</section>
{% endblock %}
