{% extends "_layout.html" %}

{% block title %}Access Forbidden - {{ app_name }}{% endblock %}
{% block description %}You don't have permission to access this resource.{% endblock %}
{% block page_name %}error-403{% endblock %}

{% block content %}
<section data-component="error-page" data-type="403">
    <header data-role="error-header">
        <h1 id="heading-error-403">403</h1>
        <h2 id="heading-error-message">Access Forbidden</h2>
    </header>

    <div data-role="error-body">
        <p id="error-description">
            {% if message %}
                {{ message }}
            {% else %}
                You don't have permission to access this resource. This area may be restricted to certain users or require special privileges.
            {% endif %}
        </p>

        <div data-role="error-details">
            {% if request_path %}
            <p id="error-path">
                <strong>Requested path:</strong>
                <code>{{ request_path }}</code>
            </p>
            {% endif %}

            {% if request_id %}
            <p id="error-request-id">
                <strong>Request ID:</strong>
                <code>{{ request_id }}</code>
            </p>
            {% endif %}

            {% if required_role %}
            <p id="error-required-role">
                <strong>Required role:</strong>
                <code>{{ required_role }}</code>
            </p>
            {% endif %}
        </div>

        <nav data-role="error-actions">
            {% if user.is_some() %}
                <a href="/projects" role="button" data-type="primary">
                    <span aria-hidden="true">üìÅ</span> View Your Projects
                </a>
                <a href="/profile" role="button" data-type="secondary">
                    <span aria-hidden="true">üë§</span> Your Profile
                </a>
            {% else %}
                <a href="/login" role="button" data-type="primary">
                    <span aria-hidden="true">üîë</span> Sign In
                </a>
                <a href="/signup" role="button" data-type="secondary">
                    <span aria-hidden="true">‚ú®</span> Create Account
                </a>
            {% endif %}

            <a href="/" role="button" data-type="secondary">
                <span aria-hidden="true">üè†</span> Go to Homepage
            </a>
        </nav>

        <div data-role="error-info">
            <details data-component="help-details">
                <summary>Why don't I have access?</summary>
                <div data-role="details-content">
                    <p>Access may be restricted because:</p>
                    <ul>
                        <li>This content belongs to another user</li>
                        <li>You need to be a member of a specific organization</li>
                        <li>Your account doesn't have the required permissions</li>
                        <li>This feature requires a premium subscription</li>
                        <li>The resource owner has set it to private</li>
                    </ul>
                    <p>If you believe you should have access, please contact the resource owner or an administrator.</p>
                </div>
            </details>
        </div>
    </div>

    <footer data-role="error-footer">
        <div data-role="help-text">
            <p>If you believe this is an error, please contact support with the request ID above.</p>
        </div>
    </footer>
</section>
{% endblock %}
