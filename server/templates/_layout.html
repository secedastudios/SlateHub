<!doctype html>
<html lang="en" data-theme="dark">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="color-scheme" content="light dark" />
        <meta
            name="description"
            content="{% block description %}SlateHub - A collaborative hub for the TV, film, and content industries{% endblock %}"
        />
        <title>{% block title %}{{ app_name }}{% endblock %}</title>

        <!-- Pico CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
        />

        <!-- SlateHub Custom Overrides -->
        <link rel="stylesheet" href="/static/css/slatehub-pico.css" />

        <!-- Theme Initialization Script -->
        <script>
            // Check for saved theme preference or default to dark
            const savedTheme = localStorage.getItem("theme") || "dark";
            document.documentElement.setAttribute("data-theme", savedTheme);
        </script>

        {% block head %}{% endblock %}
    </head>
    <body>
        <header>
            <nav class="container">
                <ul>
                    <li>
                        <a href="/" class="contrast"
                            ><strong>{{ app_name }}</strong></a
                        >
                    </li>
                </ul>
                <ul>
                    <li>
                        <a
                            href="/"
                            class="{% if active_page == 'home' %}contrast{% endif %}"
                            >Home</a
                        >
                    </li>
                    <li>
                        <a
                            href="/projects"
                            class="{% if active_page == 'projects' %}contrast{% endif %}"
                            >Projects</a
                        >
                    </li>
                    <li>
                        <a
                            href="/people"
                            class="{% if active_page == 'people' %}contrast{% endif %}"
                            >People</a
                        >
                    </li>
                    <li>
                        <a
                            href="/about"
                            class="{% if active_page == 'about' %}contrast{% endif %}"
                            >About</a
                        >
                    </li>
                </ul>
                <ul>
                    <li>
                        <!-- Theme Toggle -->
                        <button
                            id="theme-toggle"
                            class="contrast outline"
                            aria-label="Toggle theme"
                            data-tooltip="Toggle theme"
                            data-placement="bottom"
                        >
                            <span class="theme-icon-light" aria-hidden="true"
                                >‚òÄÔ∏è</span
                            >
                            <span class="theme-icon-dark" aria-hidden="true"
                                >üåô</span
                            >
                        </button>
                    </li>
                    <li>
                        <!-- User Menu -->
                        {% if user %}
                        <details class="dropdown">
                            <summary role="button" class="contrast outline">
                                <img
                                    src="{{ user.avatar }}"
                                    alt="{{ user.name }}"
                                    class="user-avatar"
                                />
                            </summary>
                            <ul dir="rtl">
                                <li><a href="/profile">Profile</a></li>
                                <li><a href="/settings">Settings</a></li>
                                <li><hr /></li>
                                <li>
                                    <form action="/logout" method="post">
                                        <button type="submit" class="contrast">
                                            Logout
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </details>
                        {% else %}
                        <a href="/login" role="button" class="contrast outline"
                            >Login</a
                        >
                    </li>
                    <li>
                        <a href="/signup" role="button">Sign Up</a>
                        {% endif %}
                    </li>
                </ul>
            </nav>
        </header>

        <main class="container">{% block content %}{% endblock %}</main>

        <footer>
            <div class="container">
                <div class="grid">
                    <div>
                        <hgroup>
                            <h3>{{ app_name }}</h3>
                            <p>
                                A free, open-source SaaS platform for the TV,
                                film, and content industries.
                            </p>
                        </hgroup>
                    </div>

                    <div>
                        <h4>Quick Links</h4>
                        <nav>
                            <ul>
                                <li><a href="/docs">Documentation</a></li>
                                <li><a href="/api">API</a></li>
                                <li><a href="/privacy">Privacy Policy</a></li>
                                <li><a href="/terms">Terms of Service</a></li>
                            </ul>
                        </nav>
                    </div>

                    <div>
                        <h4>Connect</h4>
                        <nav>
                            <ul>
                                <li>
                                    <a
                                        href="https://github.com/slatehub"
                                        rel="noopener noreferrer"
                                        target="_blank"
                                        >GitHub</a
                                    >
                                </li>
                                <li><a href="/contact">Contact</a></li>
                                <li><a href="/blog">Blog</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>

                <hr />

                <div class="grid">
                    <p>
                        <small
                            >¬© {{ year }} {{ app_name }}. All rights
                            reserved.</small
                        >
                    </p>
                    <p>
                        <small>v{{ version }}</small>
                    </p>
                </div>
            </div>
        </footer>

        <!-- Theme Toggle Logic -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const themeToggle = document.getElementById("theme-toggle");
                if (themeToggle) {
                    themeToggle.addEventListener("click", function () {
                        const currentTheme =
                            document.documentElement.getAttribute("data-theme");
                        const newTheme =
                            currentTheme === "light" ? "dark" : "light";
                        document.documentElement.setAttribute(
                            "data-theme",
                            newTheme,
                        );
                        localStorage.setItem("theme", newTheme);
                    });
                }
            });
        </script>

        {% block scripts %}{% endblock %}
    </body>
</html>
